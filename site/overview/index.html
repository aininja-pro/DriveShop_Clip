
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://aininja-pro.github.io/DriveShop_Clip/overview/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>DriveShop Clip Tracking System - DriveShop Clip Tracking System</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#driveshop-clip-tracking-system" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DriveShop Clip Tracking System" class="md-header__button md-logo" aria-label="DriveShop Clip Tracking System" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DriveShop Clip Tracking System
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DriveShop Clip Tracking System
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DriveShop Clip Tracking System" class="md-nav__button md-logo" aria-label="DriveShop Clip Tracking System" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    DriveShop Clip Tracking System
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../module_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Utilities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core Utilities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../crawler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Crawler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../crawler-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Crawler Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creatoriq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CreatorIQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Other Utilities
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deployment & Support
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Deployment & Support
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/setup.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/future.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Future Enhancements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/support.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Support & Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project-purpose" class="md-nav__link">
    <span class="md-ellipsis">
      Project Purpose
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-components" class="md-nav__link">
    <span class="md-ellipsis">
      Core Components
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      Setup Instructions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup Instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-development-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Local Development Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-deployment-aws-ec2" class="md-nav__link">
    <span class="md-ellipsis">
      Production Deployment (AWS EC2)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-input-file-format" class="md-nav__link">
    <span class="md-ellipsis">
      1. Input File Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-dashboard-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      2. Dashboard Workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-automated-processing" class="md-nav__link">
    <span class="md-ellipsis">
      3. Automated Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-special-features" class="md-nav__link">
    <span class="md-ellipsis">
      4. Special Features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-limitations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance &amp; Limitations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance &amp; Limitations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#expected-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Expected Performance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#current-limitations-mvp" class="md-nav__link">
    <span class="md-ellipsis">
      Current Limitations (MVP)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      File Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Notes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#production-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      Production Checklist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-quotas-limits" class="md-nav__link">
    <span class="md-ellipsis">
      API Quotas &amp; Limits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maintenance-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Maintenance Tasks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements-post-mvp" class="md-nav__link">
    <span class="md-ellipsis">
      Future Enhancements (Post-MVP)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Support &amp; Troubleshooting
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="driveshop-clip-tracking-system">DriveShop Clip Tracking System</h1>
<h2 id="project-purpose">Project Purpose</h2>
<p>The DriveShop Clip Tracking System is a comprehensive media monitoring and analysis platform designed to track automotive journalist coverage of vehicle loans for DriveShop's Fleet Management System (FMS). It automates the discovery, analysis, and tracking of media content across web platforms and YouTube, providing a streamlined workflow for campaign managers to review and approve clips. The system is engineered to process approximately 60 loans daily, finding the first media mention for each loan within a 2-hour nightly processing window, ensuring comprehensive coverage tracking for automotive PR campaigns while maintaining cost-effective AI usage.</p>
<h2 id="key-features">Key Features</h2>
<ul>
<li><strong>Automated Media Discovery</strong>: Multi-tier web scraping system with intelligent escalation (Scrapy → Enhanced Headers → Headless Rendering)</li>
<li><strong>Smart Discovery Mode</strong>: Automatic navigation through "reviews", "blog", or "news" sections for unknown media sites</li>
<li><strong>YouTube Integration</strong>: Specialized handling including RSS feed monitoring and transcript extraction</li>
<li><strong>AI-Powered Analysis</strong>: GPT-4 integration for content relevance scoring, sentiment analysis, and brand message alignment</li>
<li><strong>One Clip Per Loan</strong>: Intelligent deduplication to find only the first media mention</li>
<li><strong>Person-Outlet Mapping</strong>: Automatic association of journalists with their media outlets</li>
<li><strong>Streamlit Dashboard</strong>: Password-protected web interface for reviewing and approving clips</li>
<li><strong>FMS Integration</strong>: Export functionality with <code>approved_clips.csv</code> formatted for DriveShop's system</li>
<li><strong>RSS Optimization</strong>: Direct RSS feed support for faster processing when available</li>
<li><strong>Slack Notifications</strong>: Real-time alerts for approvals, flags, and system status</li>
<li><strong>Cost-Optimized</strong>: Designed to maintain ~$1-3 daily AI costs with efficient caching</li>
</ul>
<h2 id="architecture-overview">Architecture Overview</h2>
<p>The system follows a modular architecture optimized for reliability and cost-effectiveness:</p>
<h3 id="core-components">Core Components</h3>
<ol>
<li><strong>Data Ingestion Pipeline</strong> (<code>src/ingest/</code>)</li>
<li>Processes daily loan files from FMS</li>
<li>Implements smart URL discovery for unknown media outlets</li>
<li>
<p>Manages one-clip-per-loan logic</p>
</li>
<li>
<p><strong>Tiered Web Crawling Framework</strong> (<code>src/crawler/</code>, <code>src/utils/</code>)</p>
</li>
<li><strong>Level 1</strong>: Basic Scrapy with 2s delay, 1 concurrent request</li>
<li><strong>Level 2</strong>: Enhanced headers and cookie management</li>
<li><strong>Level 3</strong>: Headless browser rendering for JavaScript-heavy sites</li>
<li>
<p>RSS feed shortcuts for supported outlets</p>
</li>
<li>
<p><strong>AI Analysis Module</strong> (<code>src/analysis/</code>)</p>
</li>
<li>OpenAI GPT-4 Turbo for cost-effective analysis</li>
<li>Evaluates relevance, sentiment, and brand message alignment</li>
<li>
<p>~$0.01-$0.03 per analysis call</p>
</li>
<li>
<p><strong>Dashboard Application</strong> (<code>src/dashboard/</code>)</p>
</li>
<li>Streamlit-based interface (no custom theming in MVP)</li>
<li>AgGrid for efficient data manipulation</li>
<li>
<p>Password authentication (single shared password)</p>
</li>
<li>
<p><strong>Data Storage Layer</strong></p>
</li>
<li>Supabase (PostgreSQL) for persistent storage</li>
<li>Local SQLite cache for scraping results</li>
<li>CSV export for FMS integration</li>
</ol>
<h3 id="data-flow">Data Flow</h3>
<ol>
<li><strong>Input</strong>: Daily loan CSV from FMS or manual upload</li>
<li><strong>Discovery</strong>: Automated search with smart navigation for unknown sites</li>
<li><strong>Processing</strong>: Content extraction with tiered escalation</li>
<li><strong>Analysis</strong>: GPT-4 evaluates content (first mention only)</li>
<li><strong>Review</strong>: Manual approval via Streamlit dashboard</li>
<li><strong>Output</strong>: <code>approved_clips.csv</code> for FMS import</li>
</ol>
<h2 id="setup-instructions">Setup Instructions</h2>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>Python 3.11.4 (specific version required)</li>
<li>Docker and Docker Compose</li>
<li>AWS EC2 t3.small instance (for production)</li>
<li>API keys for required services</li>
</ul>
<h3 id="environment-variables">Environment Variables</h3>
<p>Create a <code>.env</code> file based on <code>.env.template</code>:</p>
<pre><code class="language-bash"># OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key

# Supabase Database
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_anon_key
DATABASE_PASSWORD=your_database_password

# Google Search API
GOOGLE_API_KEY=your_google_api_key
GOOGLE_SEARCH_ENGINE_ID=your_search_engine_id

# Web Scraping Services
SCRAPING_BEE_API_KEY=your_scraping_bee_key
SCRAPFLY_API_KEY=your_scrapfly_key

# YouTube API
YOUTUBE_API_KEY=your_youtube_api_key

# Slack Notifications
SLACK_WEBHOOK_URL=your_slack_webhook_url

# Streamlit Security
STREAMLIT_PASSWORD=your_dashboard_password

# Application Settings
API_BASE_URL=http://localhost:8000
LOG_LEVEL=INFO
</code></pre>
<h3 id="local-development-setup">Local Development Setup</h3>
<ol>
<li>
<p>Clone the repository:
   <code>bash
   git clone &lt;repository_url&gt;
   cd DriveShop_Clip</code></p>
</li>
<li>
<p>Create Python 3.11.4 virtual environment:
   <code>bash
   python3.11 -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate</code></p>
</li>
<li>
<p>Install dependencies:
   <code>bash
   pip install -r requirements.txt</code></p>
</li>
<li>
<p>Install Playwright for Level 3 scraping:
   <code>bash
   playwright install chromium</code></p>
</li>
<li>
<p>Run the Streamlit dashboard:
   <code>bash
   streamlit run src/dashboard/app.py</code></p>
</li>
</ol>
<h3 id="production-deployment-aws-ec2">Production Deployment (AWS EC2)</h3>
<ol>
<li>Launch EC2 t3.small instance in us-east-1</li>
<li>Configure security group:</li>
<li>Port 22 (SSH)</li>
<li>Port 8501 (Streamlit)</li>
<li>SSH into instance and clone repository</li>
<li>Create <code>.env</code> file with production credentials</li>
<li>Build and run with Docker:
   <code>bash
   docker-compose up -d</code></li>
<li>Access dashboard at <code>http://&lt;ec2-public-ip&gt;:8501</code></li>
</ol>
<h2 id="usage-guide">Usage Guide</h2>
<h3 id="1-input-file-format">1. Input File Format</h3>
<p>Create CSV/Excel files with these required columns:
- <code>Work Order Number</code> (WO): Unique FMS identifier
- <code>Loan ID</code>: Unique loan identifier
- <code>First Name</code>: Journalist's first name
- <code>Last Name</code>: Journalist's last name
- <code>Media Outlet</code>: Known outlet or "Unknown"
- <code>Model</code>: Vehicle model (e.g., "X5", "Accord")
- <code>Start Date</code>: Loan start date
- <code>End Date</code>: Loan end date
- <code>URL</code> (optional): Direct link or RSS feed</p>
<h3 id="2-dashboard-workflow">2. Dashboard Workflow</h3>
<ol>
<li><strong>Access</strong>: Navigate to Streamlit URL, enter password</li>
<li><strong>Upload</strong>: Use file uploader for loan CSV/Excel</li>
<li><strong>Process</strong>: Click "Process Loans Without Clips"</li>
<li>System finds first mention only</li>
<li>Uses RSS feeds when available</li>
<li>Follows discovery logic for unknown sites</li>
<li><strong>Review</strong>: AgGrid displays found clips with:</li>
<li>Relevance score (0-100)</li>
<li>Sentiment analysis</li>
<li>Brand message alignment</li>
<li>Full content preview</li>
<li><strong>Actions</strong>:</li>
<li>Approve/Reject individual clips</li>
<li>Update media outlet assignments</li>
<li>Trigger re-analysis if needed</li>
<li><strong>Export</strong>: Download <code>approved_clips.csv</code> for FMS</li>
</ol>
<h3 id="3-automated-processing">3. Automated Processing</h3>
<p>Nightly cron job runs at 2 AM:
- Processes all pending loans
- Sends Slack notifications for new clips
- Completes within 2-hour window
- Maintains one-clip-per-loan rule</p>
<h3 id="4-special-features">4. Special Features</h3>
<ul>
<li><strong>RSS Shortcuts</strong>: Add RSS feed URLs to bypass crawling</li>
<li><strong>YouTube RSS</strong>: Use <code>https://www.youtube.com/feeds/videos.xml?channel_id=CHANNEL_ID</code></li>
<li><strong>Discovery Mode</strong>: Automatically navigates review/blog sections</li>
<li><strong>Model Variations</strong>: "X5" matches "BMW X5", "2024 X5", etc.</li>
</ul>
<h2 id="performance-limitations">Performance &amp; Limitations</h2>
<h3 id="expected-performance">Expected Performance</h3>
<ul>
<li><strong>Daily Volume</strong>: ~60 loans with 2-4 URLs each</li>
<li><strong>Processing Time</strong>: &lt;2 hours for nightly batch</li>
<li><strong>Success Rate</strong>: &gt;90% content extraction</li>
<li><strong>AI Costs</strong>: $1-3 per day (~100 GPT-4 calls)</li>
</ul>
<h3 id="current-limitations-mvp">Current Limitations (MVP)</h3>
<ul>
<li>English content only</li>
<li>No direct FMS API integration</li>
<li>Single password authentication</li>
<li>No mobile interface</li>
<li>Manual deployment process</li>
<li>One clip per loan maximum</li>
</ul>
<h2 id="file-structure">File Structure</h2>
<pre><code>DriveShop_Clip/
├── src/
│   ├── dashboard/
│   │   └── app.py              # Streamlit dashboard
│   ├── ingest/
│   │   ├── ingest.py           # Core processing pipeline
│   │   └── ingest_database.py  # Database processing
│   ├── analysis/
│   │   └── gpt_analysis.py     # AI analysis (GPT-4)
│   ├── crawler/
│   │   └── crawler/spiders/    # Scrapy configurations
│   ├── creatoriq/              # Future integration
│   └── utils/
│       ├── database.py         # Supabase client
│       ├── crawler_manager.py  # Tiered escalation
│       ├── youtube_api.py      # YouTube integration
│       └── model_variations.py # Vehicle matching
├── data/
│   ├── person_outlets_mapping.csv  # Journalist mappings
│   └── media_sources.csv           # JS-heavy site flags
├── documentation/              # Project documentation
├── docker-compose.yml         # Container orchestration
├── Dockerfile                 # Container definition
├── requirements.txt           # Python 3.11.4 deps
└── .env.template             # Environment template
</code></pre>
<h2 id="deployment-notes">Deployment Notes</h2>
<h3 id="production-checklist">Production Checklist</h3>
<ol>
<li><strong>Infrastructure</strong>:</li>
<li>AWS EC2 t3.small in us-east-1</li>
<li>Security groups configured</li>
<li>
<p>Elastic IP recommended</p>
</li>
<li>
<p><strong>Environment</strong>:</p>
</li>
<li>Production <code>.env</code> file secured</li>
<li>Secrets never in Git</li>
<li>
<p>API keys rotated quarterly</p>
</li>
<li>
<p><strong>Monitoring</strong>:</p>
</li>
<li>Slack webhook configured</li>
<li>CloudWatch for EC2 metrics</li>
<li>
<p>Daily cost monitoring for APIs</p>
</li>
<li>
<p><strong>Cron Schedule</strong>:
   <code>bash
   # Nightly processing at 2 AM
   0 2 * * * cd /app &amp;&amp; docker-compose run app python src/ingest/ingest_database.py</code></p>
</li>
</ol>
<h3 id="api-quotas-limits">API Quotas &amp; Limits</h3>
<ul>
<li><strong>YouTube API</strong>: 10,000 units/day quota</li>
<li><strong>OpenAI</strong>: Monitor token usage (~$1-3/day target)</li>
<li><strong>ScrapingBee/ScrapFly</strong>: Check monthly limits</li>
<li><strong>Google Search</strong>: 100 queries/day free tier</li>
</ul>
<h3 id="maintenance-tasks">Maintenance Tasks</h3>
<ul>
<li><strong>Weekly</strong>: Clear SQLite cache if &gt;1GB</li>
<li><strong>Monthly</strong>: Review API usage and costs</li>
<li><strong>Quarterly</strong>: Update dependencies, rotate API keys</li>
<li><strong>As Needed</strong>: Update <code>person_outlets_mapping.csv</code></li>
</ul>
<h2 id="future-enhancements-post-mvp">Future Enhancements (Post-MVP)</h2>
<ul>
<li>Direct FMS API integration</li>
<li>Multi-user authentication with roles</li>
<li>Airtable or advanced database storage</li>
<li>Email notification system</li>
<li>Mobile-responsive interface</li>
<li>Multi-language content support</li>
<li>Advanced analytics dashboard</li>
<li>Automated model training for relevance</li>
</ul>
<h2 id="support-troubleshooting">Support &amp; Troubleshooting</h2>
<ul>
<li><strong>Logs</strong>: Check <code>app.log</code> for detailed debugging</li>
<li><strong>Common Issues</strong>:</li>
<li>403 errors: Site needs Level 3 escalation</li>
<li>No clips found: Check discovery keywords</li>
<li>Slow processing: Review concurrent limits</li>
<li><strong>Documentation</strong>: See <code>/documentation</code> folder</li>
<li><strong>Slack Channel</strong>: Real-time system notifications</li>
</ul>
<p>For technical support, reference the implementation plan and technical documentation, or contact the development team.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [{"navigation.tabs": false}], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>